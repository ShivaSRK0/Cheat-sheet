# Securing server in very basic way with CentOS7

**SERVER-SIDE**

1. login to the root.

  `ssh root@YOUR_IP_ADDRESS`

2. Create a new user.

  `adduser demo`

3. Assign password to `demo` user.

  `passwd demo`

4. Allow user `demo` to execute commands with administrative privileges by putting the word `sudo` before each command. This command will add `demo` user to the `wheel group`.

  `gpasswd -a demo wheel`

**CLIENT-SIDE**

1. Generate SSH key pair which consist of public and private key. If you have already SSH key pair then skip this method.
  
  `ssh-keygen`

 Assuming your local user is called "localuser", you will see output that looks like the following:
 
 ```
 ssh-keygen output
Generating public/private rsa key pair.
Enter file in which to save the key (/Users/localuser/.ssh/id_rsa):
```

  Hit return to accept this file name and path (or enter a new name).

  Next, you will be prompted for a passphrase to secure the key with. You may either enter a passphrase or leave the passphrase blank.

  **Note:** If you leave the passphrase blank, you will be able to use the private key for authentication without entering a passphrase. If you enter a passphrase, you will need both the private key and the passphrase to log in. Securing your keys with passphrases is more secure, but both methods have their uses and are more secure than basic password authentication.

  This generates a private key, `id_rsa`, and a public key, `id_rsa.pub`, in the `.ssh` directory of the localuser's home directory. Remember that the private key should not be shared with anyone who should not have access to your servers!
  
2. Open the `id_rsa.pub` to see the content and copy it.

  `cat id_rsa.pub`
  
  result something like
  
  ```
  ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCuxxM50hTCtc0GTeFjhSaItvleuqYwdrv9kwKMkAZr3wEwu2yrnGr/eJ9QhMFSbGrXtC44+9/E38ukHxeVIjsONDchzt6FwyHTZl+f7uCnJZDLtST9Vlu+NFpJNYc9m22Ry4h7XxeHw0JjfQJkmjKLrK2kcrNrymu0L/RDuv5grBUk5s80n4HZB4WMqyEGlCRIuxgYl2/4g5Zo4y0diYnJ2ppTVgzFYJ82e1qZ4r80HH7ImbYvaA1Lgg7jEet4bBjvJ3s9b/jF4+0PGTwTR6Kbog097JvyeGSfkeEavBGS7Qg5NHeO/deqDEJ1LYUm+D2qw0YCaGVKfPow6eoGXnS9 sample@sample.local
  ```
  
3. Now back to server using `demo` account.
  
  `ssh demo@YOUR_IP_ADDRESS`
  
**SERVER-SIDE (again)**

1. If `~/.ssh/authorized_keys` is not yet exist. Then we will create ours.
  
  - Create folder `.ssh` and restrict its permissions with the following commands:
    
    `mkdir .ssh`
    `chmod 700 .ssh`
    
  - then create `authorized_keys` using editor like `vim`.
  
    `vim authorized_keys`
    
  - and paste the `id_rsa` keys the one that we copy from the client-side generated by `ssh-keygen`.
  
  - then save the file.

2. Then restrict the permission of the `authorized_keys`
  
  `chmod 600 .ssh/authorized_keys`

3. Now go to `root` user.
  
  `exit` or `sudo su`

4. Using `vim` editor open the `sshd_config`.

  `vim /etc/ssh/sshd_config`
  
  now find the ff maybe uncomment them or change the value
  
  - Port `56699`
  
  - PermitRootLogin `no`
  
  - PermitEmptyPasswords `no`
  
  - PasswordAuthentication `no`
  
  - ChallengeResponseAuthentication `no`
  
  
  
  
  
> So we're done! This is a short tutorial only. you can visit or click this [link] (https://www.digitalocean.com/community/tutorials/initial-server-setup-with-centos-7) for more info.

> :sparkles: Thanks and Have a Nice Day :sparkles:
